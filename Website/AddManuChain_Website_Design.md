# AddManuChain â€” Public Website Design Brief

> **Purpose:** Design the public-facing marketing & platform website for AddManuChain.  
> **Audience:** Offshore operators, naval procurement, OEM supply chain managers, AM facility operators.  
> **Tone:** Professional, industrial, trustworthy â€” NOT startup-y or AI-hype. Grounded.  
> **Based on:** 50+ customer discovery interviews + ALMA-TECH pitch deck (2021â€“2026)

---

## ğŸ¯ Core Message (The One Thing)

> **"When a part fails at sea, every hour costs $50,000â€“$100,000. We print certified replacements in days, not weeks."**

Everything on the site flows from this. Lead time compression for remote operations is the validated #1 pain point across all segments.

---

## ğŸ—‚ï¸ Site Architecture (5 Pages)

```
/ Home
/how-it-works
/who-its-for
/trust (Certifications & Security)
/contact (Pilot Program CTA)
```

---

## ğŸ“„ Page 1 â€” Home (`/`)

### Section A: Hero

**Headline:** `The On-Demand Part. When You're 500km from the Nearest Warehouse.`

**Subheadline:**  
AddManuChain connects OEM blueprint owners, certified 3D-printing centers, and offshore operators â€” delivering LR/DNV-certified parts on demand.

**Primary CTA:** â†’ `Request a Pilot`  
**Secondary CTA:** â†’ `See How It Works`

**Hero Visual Direction:**  
Full-bleed dark image â€” offshore platform OR Arctic vessel in fog. Minimal, serious, industrial.

---

### Section B: The Pain (Numbers First)

> Design note: 3 stat cards, white on dark slate background. No fluff. Numbers from real interviews.

| Stat | Source |
|------|--------|
| **$50Kâ€“$100K/day** downtime when a part fails at sea | Adam Mars, Rosen Maritime (Interview #48) |
| **$30â€“50M** inventory sitting unused per offshore vessel | Jason Power, Noble Corp (Interview #4) |
| **9â€“14 weeks** average lead time for a replacement part in remote operations | Multiple interviewees |

**Section Header:** `The problem is not technology. It's time.`

**Body copy:**  
*"Remote and offshore operators already know additive manufacturing exists. What they don't have is a pre-certified, on-demand supply chain they can trust. When a thruster bearing fails in the Arctic, you can't wait for a courier from Rotterdam."*  
â€” Validated by Lonita Judge, COO, Horizon Maritime

---

### Section C: How It Works (3 Steps)

**Section Header:** `Print. Certify. Deliver. That's the whole system.`

```
Step 1 â€” Blueprint Library
OEM partners deposit certified CAD blueprints into the platform. 
Every file is IP-protected, version-controlled, and traceable.

Step 2 â€” Certified Print Center Network
Buyers request a part. The platform routes it to the nearest 
LR or DNV-certified 3D-printing facility.

Step 3 â€” Audit-Traced Delivery
Every print creates an immutable receipt: who printed it, 
on which machine, with which material, certified to which standard.
```

**Callout quote:**  
> *"You're the Amazon for additive manufacturing. You take 10%. The 90% goes back to the original designer."*  
> â€” Dwayne Hopkins, Mentor, Co-Innovation Centre, St. John's NL

---

### Section D: Who It's For (3 Segments)

**Section Header:** `Built for industries where 'out of stock' is not an option.`

| Segment | Pain | Our Answer |
|---------|------|-----------|
| â›½ **Offshore Oil & Gas** | Long lead times for critical spare parts | Pre-certified digital inventory printed at nearest facility |
| âš“ **Naval & Defense** | Sovereign capability for ships far from logistics hubs | Canada-based AM network with immutable print trail |
| ğŸ§Š **Arctic & Remote Utilities** | Getting a repair person out takes longer than the repair | Nearest certified facility prints and ships |

---

### Section E: Trust Bar

**Section Header:** `Every part is certified before it leaves the printer.`

Logos/badges: Lloyd's Register â€” DNV GL â€” Atlantic XL â€” Lab2Market Oceans 2026

**Supporting copy:**  
*"Certification is the #1 adoption barrier in this industry. We built the certification workflow into the platform â€” not as an afterthought."*

---

### Section F: Footer CTA

**Headline:** `Your next unplanned outage doesn't have to cost $75,000 a day.`

**CTA:** â†’ `Join the Pilot Program`

---

## ğŸ“„ Page 2 â€” How It Works (`/how-it-works`)

### The 3-Node Model

#### Node 1: Designers (OEM Blueprint Owners)
- Deposit pre-certified CAD files into the encrypted library
- Every file has version control, access permissions, and IP logging
- OEMs earn 90% royalty on every print â€” passively, with full traceability

#### Node 2: Print Centers (Certified AM Facilities)
- Vetted, LR/DNV-certified facilities across Canada
- Pre-qualified: material, process, machine, and operator all certified
- First anchor partner: **Atlantic XL, Halifax NS**

#### Node 3: Buyers (Operators)
- Offshore operators, naval procurement, Arctic fleet managers
- Request a part â†’ nearest certified center prints â†’ audit trail delivered with every order

#### Platform Role: Trust Layer
- IP protection via encrypted access control + immutable audit logs
- Pre-certification stored per-part (certify once, use across all prints)
- AI feasibility layer: which parts in your inventory are AM-viable?

---

### Just-In-Case vs. Just-In-Time

| | Legacy (Just-in-Case) | AddManuChain (Just-In-Time) |
|---|---|---|
| Storage | $30â€“50M physical warehouse per vessel | Digital library â€” unlimited parts, zero storage cost |
| Lead time | 9â€“14 weeks from OEM | 3â€“5 days from nearest certified center |
| Certification | Re-certify every run | Certify once, reuse across all prints |
| IP Risk | Reverse-engineerable from physical parts | Encrypted, logged, permissioned |
| Obsolescence | Parts EOL = useless inventory | Print on demand = no obsolescence |

*Source: ALMA-TECH Pitch Deck; validated across 26+ customer discovery interviews*

---

## ğŸ“„ Page 3 â€” Who It's For (`/who-its-for`)

### Offshore Oil & Gas (Beachhead)
- **Target:** Equinor Bay du Nord (greenfield â€” no legacy warehouse)
- **Pain:** $500Kâ€“$1M/day drilling downtime; $30â€“50M unused inventory per vessel
- **Entry:** Non-critical, non-structural parts first (bearings, brackets, fittings, sensor mounts)
- **Quote:** *"If there's a long lead time, that's when we run into the problems."* â€” Lonita Judge, Horizon Maritime
- **CTA:** â†’ Request an inventory feasibility assessment

### Canadian Navy / Defense
- **Validated:** Thales + Cove partnership; Arctic Patrol Vessel AM digital library program
- **DND Language:** *"Advanced sovereign and scalable production methods to optimize system performance through supply chain resilience, production volume, and rapid redesign."*
- **Entry:** Temporary non-certified parts for emergency on-ship use (validated: Lee Vessey, Thales)
- **CTA:** â†’ Request a defense consultation

### Arctic & Remote Utilities
- **Validated:** Adam Chubbs (Ecotex/Frobisher Energy) â€” $4â€“5M inventory for $50M asset base
- **Entry:** Self-certifiable non-structural components
- **CTA:** â†’ Talk to our team

---

## ğŸ“„ Page 4 â€” Trust & Certification (`/trust`)

**Header:** `"Trust nobody, test everything." â€” Bachar Elzein, Reaction Dynamics`

### 3 Pillars of Trust

#### 1. Pre-Certified Parts Library
- Certified once (LR/DNV Type Approval or DNV GL Part 6)
- Certification stored per materialâ€“printerâ€“process combination
- Operators never re-certify the same part â€” cert carries across all prints

#### 2. IP Security & Audit Trail
- Blueprints in encrypted, access-controlled repository
- Every print: immutable log with user, org, machine, material, timestamp
- On-premise option for OEMs requiring full data sovereignty

#### 3. Quality Assurance by Design
- Test coupons printed alongside every production run
- In-process monitoring (ASTM-aligned)
- Full material traceability from powder batch â†’ finished part

---

### Certification Standards

| Standard | Applicable To |
|---------|--------------|
| Lloyd's Register Type Approval | Marine structural + critical components |
| DNV GL Part 6 | Marine, offshore, subsea |
| CSA / UL | Electrical and utility applications |
| Self-certification | Non-public utility environments |
| ASTM AM Standards | Process and material validation |

---

## ğŸ“„ Page 5 â€” Pilot Program (`/contact`)

**Header:** `We're running 3 lighthouse pilots in 2026. Is your operation one of them?`

**Subheader:**  
Our first pilots are with a small number of carefully selected operators in offshore, naval, and remote utility sectors. We build the digital inventory side-by-side with your supply chain team.

### What the Pilot Includes:
- AM feasibility assessment of your existing spare parts inventory
- Identification of 5â€“20 non-critical parts suitable for on-demand printing
- Integration of those parts into the AddManuChain digital library
- First print run from certified partner (Atlantic XL, Halifax)
- Full LR/DNV audit trail delivered with your first part

### Pricing:
- One-time digital inventory license fee per part
- Per-print transaction fee (OEM receives 90%, platform takes 10%)
- No subscription. No commitment beyond the pilot.

### Contact Form Fields:
- Name / Role / Organization
- Sector: [ ] O&G  [ ] Naval  [ ] Arctic/Utility  [ ] Other
- *"What's the hardest part to source in your current operations?"*
- [ ] I'd like a 30-minute call

**CTA:** â†’ `Apply for a Pilot Spot`

---

## ğŸ¨ Design System

### Colors
| Role | Hex | Use |
|------|-----|-----|
| Primary Dark | `#0F172A` | Hero, headings background |
| Accent Blue | `#0EA5E9` | CTA buttons, links |
| Accent Teal | `#14B8A6` | Secondary accents |
| Warning Amber | `#F59E0B` | Stats ($50K/day) |
| Off-white | `#F8FAFC` | Section backgrounds |

### Typography
- **Headings:** Inter Bold â€” heavy weight, tight tracking
- **Body:** Inter Regular â€” 16â€“18px
- **Stats:** Inter Black, oversized â€” make numbers unmissable

### Photography Direction
- âœ… Real industrial: offshore rigs, metal 3D printers, close-up machined parts
- âŒ Generic stock startup photos, handshakes, cloud computing graphics

### Tone of Voice
- âœ… *"When a thruster bearing fails in the Arctic, you cannot wait 9 weeks."*
- âœ… *"Every print creates an immutable audit trail."*
- âŒ *"Revolutionary AI-powered next-gen supply chain optimization"*
- âŒ *"Disruptive digital transformation"*

---

## ğŸš« Do Not Put on the Website

| Don't Say | Why | Source |
|-----------|-----|--------|
| "AI-powered" as the lead message | *"AI will just muddy the waters"* | Kwadwo Ampofo, Deloitte (#25) |
| "Replace your entire inventory with AM" | Only 5â€“20% of inventory is AM-viable | Mark Kirby (#9) |
| "Metal AM on-demand" without machining caveat | Metal AM always requires post-machining | Mark Kirby (#9) |
| "Cloud-based blueprint storage" without caveat | IP concern is the #1 barrier | Assembly Studio, NGen, Jim Granger |
| Target big O&G operators directly | They don't decide; integrators control the buy | Jason Power (#4) |

---

## âœ… Site Success Metrics

| Metric | Target |
|--------|--------|
| Pilot applications | 10+ qualified operators |
| OEM inbound inquiries | 3+ |
| Time on How It Works page | >90 seconds avg |
| Contact form conversion | >5% of visitors |
| Government/defense referral | â‰¥1 from site visibility |

---

*Built from: 50+ customer discovery interviews (Janâ€“Feb 2026) + ALMA-TECH Pitch Deck*  
*Key sources: Jason Power (#4), John Lidstone (#6), Dr. Nasiri (#11), Jim Granger (#23), Adam Chubbs (#30), Lonita Judge (#48), Bachar Elzein (#50), Dwayne Hopkins (Mentor, Feb 2026)*

---

---

# AddManuChain Dashboard â€” Complete Rebuild Roadmap

> **What this covers:** A full step-by-step technical guide to recreate the AddManuChain Dashboard application from scratch â€” every file, every module, every API route, every database model.
>
> **Source analyzed:** `Website/AddManuChain Dashboard/` â€” Next.js 16 app with 14 dashboard pages, Prisma/PostgreSQL, NextAuth.js, full REST API, shadcn/ui, Recharts, Framer Motion, dark mode, Sentry error tracking, Vercel deployment.

---

## Phase 0 â€” Prerequisites

Before writing any code, ensure the following are installed:

| Tool | Version | Command to verify |
|------|---------|-------------------|
| Node.js | 18+ | `node -v` |
| npm | 9+ | `npm -v` |
| Git | Any | `git --version` |
| PostgreSQL | 14+ (prod) | `psql --version` |

For local dev, SQLite is fine. For production, use PostgreSQL (Neon, Supabase, or Railway all work).

---

## Phase 1 â€” Project Scaffolding

### Step 1.1 â€” Create the Next.js app

```bash
npx create-next-app@latest addmanuchain-dashboard \
  --typescript \
  --tailwind \
  --eslint \
  --app \
  --src-dir \
  --import-alias "@/*"
cd addmanuchain-dashboard
```

### Step 1.2 â€” Install all dependencies

```bash
npm install \
  @prisma/client prisma \
  next-auth @next-auth/prisma-adapter \
  bcryptjs @types/bcryptjs \
  @tanstack/react-query @tanstack/react-table \
  @hookform/resolvers react-hook-form zod \
  swr \
  recharts \
  framer-motion \
  lucide-react \
  date-fns \
  clsx tailwind-merge class-variance-authority \
  cmdk \
  sonner \
  next-themes \
  next-intl \
  embla-carousel-react \
  react-day-picker \
  react-markdown \
  react-syntax-highlighter @types/react-syntax-highlighter \
  react-resizable-panels \
  @mdxeditor/editor \
  @dnd-kit/core @dnd-kit/sortable @dnd-kit/utilities \
  input-otp \
  sharp \
  @sentry/nextjs
```

### Step 1.3 â€” Install shadcn/ui

```bash
npx shadcn@latest init
```

When prompted:
- Style: Default
- Base color: Slate
- CSS variables: Yes

Then add every component used in the dashboard:

```bash
npx shadcn@latest add button card badge input label select \
  dialog sheet dropdown-menu popover tooltip \
  table tabs accordion collapsible \
  avatar progress slider switch checkbox radio-group \
  alert alert-dialog toast toaster \
  separator scroll-area \
  navigation-menu menubar context-menu hover-card \
  calendar date-picker \
  command \
  form \
  skeleton \
  toggle toggle-group \
  aspect-ratio \
  chart
```

### Step 1.4 â€” Initialize Prisma

```bash
npx prisma init
```

This creates `prisma/schema.prisma` and `.env`. Edit `.env`:

```env
DATABASE_URL="file:./dev.db"           # local dev (SQLite)
# DATABASE_URL="postgresql://..."      # production (PostgreSQL)
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="<run: openssl rand -base64 32>"
```

---

## Phase 2 â€” Design System & Global Styles

### Step 2.1 â€” Brand color tokens (`src/app/globals.css`)

Replace the default CSS variables with the AddManuChain design system:

```css
@import "tailwindcss";

:root {
  --radius: 0.625rem;

  /* Brand tokens */
  --brand-dark:    #0F172A;
  --brand-blue:    #0EA5E9;
  --brand-teal:    #14B8A6;
  --brand-amber:   #F59E0B;
  --brand-offwhite:#F8FAFC;

  /* shadcn/ui mappings */
  --background:          #F8FAFC;
  --foreground:          #0F172A;
  --card:                #FFFFFF;
  --card-foreground:     #0F172A;
  --primary:             #0EA5E9;
  --primary-foreground:  #FFFFFF;
  --secondary:           #F1F5F9;
  --secondary-foreground:#0F172A;
  --muted:               #F1F5F9;
  --muted-foreground:    #64748B;
  --accent:              #14B8A6;
  --accent-foreground:   #FFFFFF;
  --destructive:         oklch(0.577 0.245 27.325);
  --border:              #E2E8F0;
  --input:               #E2E8F0;
  --ring:                #0EA5E9;

  /* Chart colors */
  --chart-1: #0EA5E9;
  --chart-2: #14B8A6;
  --chart-3: #0F172A;
  --chart-4: #F59E0B;
  --chart-5: #64748B;

  /* Sidebar */
  --sidebar:                    #F8FAFC;
  --sidebar-foreground:         #0F172A;
  --sidebar-primary:            #0EA5E9;
  --sidebar-primary-foreground: #FFFFFF;
  --sidebar-accent:             #F1F5F9;
  --sidebar-accent-foreground:  #0F172A;
  --sidebar-border:             #E2E8F0;
  --sidebar-ring:               #0EA5E9;
}

.dark {
  --background:    #0F172A;
  --foreground:    #F8FAFC;
  --card:          #1E293B;
  --card-foreground:#F8FAFC;
  --primary:       #0EA5E9;
  --muted:         #334155;
  --muted-foreground:#94A3B8;
  --border:        #334155;
  --sidebar:       #1E293B;
}
```

### Step 2.2 â€” Root layout (`src/app/layout.tsx`)

```tsx
import type { Metadata } from "next"
import { Inter } from "next/font/google"
import "./globals.css"
import { Toaster } from "@/components/ui/toaster"
import { Providers } from "@/components/Providers"

const inter = Inter({ variable: "--font-inter", subsets: ["latin"] })

export const metadata: Metadata = {
  title: "AddManuChain â€” On-Demand Certified Parts for Remote Operations",
  description: "When a part fails at sea, every hour costs $50,000â€“$100,000.",
  keywords: ["additive manufacturing","offshore","DNV","Lloyd's Register","supply chain"],
}

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" suppressHydrationWarning>
      <body className={`${inter.variable} font-sans antialiased bg-background text-foreground`}>
        <Providers>
          {children}
          <Toaster />
        </Providers>
      </body>
    </html>
  )
}
```

### Step 2.3 â€” Providers wrapper (`src/components/Providers.tsx`)

Wraps the app with:
- `SessionProvider` from next-auth/react
- `QueryClientProvider` from @tanstack/react-query
- `ThemeProvider` from next-themes (dark mode toggle)

---

## Phase 3 â€” Database Schema (Prisma)

Edit `prisma/schema.prisma`. Build these 13 models in order:

### Core Authentication Models
```prisma
model User {
  id            String    @id @default(cuid())
  name          String?
  email         String    @unique
  emailVerified DateTime?
  password      String?
  image         String?
  role          String    @default("operator")
  // roles: admin | customer_admin | operator | oem_partner | print_center | cert_authority
  company       String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  accounts      Account[]
  sessions      Session[]
  orders        Order[]   @relation("UserOrders")
}

model Account { /* standard NextAuth Account model */ }
model Session { /* standard NextAuth Session model */ }
model VerificationToken { /* standard NextAuth VerificationToken model */ }
```

### Platform Models (build in this order)
| # | Model | Key fields |
|---|-------|-----------|
| 1 | `Blueprint` | blueprintId, name, category, material, oem, certification, status, printCount, filePath |
| 2 | `PrintCenter` | centerId, name, location, status, certification, totalPrinters, capacity, materials (JSON), specialties (JSON) |
| 3 | `Order` | orderId, partName, status, priority, quantity, eta â†’ linked to User + Blueprint + PrintCenter |
| 4 | `AuditLog` | action, details, userId â†’ linked to Order |
| 5 | `Shipment` | trackingId, status, origin, destination, carrier, estimatedDelivery, progress â†’ 1:1 with Order |
| 6 | `Partner` | name, email, type (OEM/Integrator/Distributor), status, blueprints, totalPrints, revenue |
| 7 | `Material` | name, category, totalStock, unit, minStock, reorderPoint, status, unitCost, leadTime |
| 8 | `MaterialStock` | stock â†’ join table of Material Ã— PrintCenter |
| 9 | `Certification` | name, type, issuer, holder, status, issueDate, expiryDate, documentUrl |
| 10 | `CertificationAuthority` | name, type, country, contact, accreditations (JSON), status |
| 11 | `Engagement` | customer, stage (Assessmentâ†’Adoptionâ†’Integrationâ†’Trainingâ†’Maintenance), progress, nextAction |
| 12 | `Training` | title, type, status, assignedTo, completedAt |
| 13 | `CertRequest` | status, requestedBy, blueprintId, authorityId, requestedAt, completedAt |

After writing all models:
```bash
npx prisma db push          # sync schema to database
npx tsx prisma/seed.ts      # populate demo data
```

The `seed.ts` file should create:
- 3 demo users (admin, operator, partner) with bcrypt-hashed passwords
- 5â€“10 blueprints (bearing housings, pump impellers, thruster components)
- 3 print centers (Atlantic XL Halifax, Montreal center, Vancouver facility)
- 10â€“15 sample orders in various statuses
- 5 partners (OEM companies)
- 3 certification authorities (Lloyd's Register, DNV GL, ABS)

---

## Phase 4 â€” Authentication

### Step 4.1 â€” NextAuth config (`src/lib/auth.ts`)

```typescript
import { PrismaAdapter } from "@next-auth/prisma-adapter"
import { prisma } from "@/lib/prisma"
import bcrypt from "bcryptjs"
import type { NextAuthOptions } from "next-auth"
import CredentialsProvider from "next-auth/providers/credentials"

export const authOptions: NextAuthOptions = {
  adapter: PrismaAdapter(prisma),
  providers: [
    CredentialsProvider({
      name: "credentials",
      credentials: {
        email: { label: "Email", type: "email" },
        password: { label: "Password", type: "password" },
      },
      async authorize(credentials) {
        if (!credentials?.email || !credentials?.password) return null
        const user = await prisma.user.findUnique({ where: { email: credentials.email } })
        if (!user || !user.password) return null
        const valid = await bcrypt.compare(credentials.password, user.password)
        if (!valid) return null
        return user
      },
    }),
  ],
  session: { strategy: "jwt" },
  callbacks: {
    async jwt({ token, user }) {
      if (user) { token.role = user.role; token.company = user.company }
      return token
    },
    async session({ session, token }) {
      if (session.user) { session.user.role = token.role; session.user.company = token.company }
      return session
    },
  },
  pages: { signIn: "/login" },
}
```

### Step 4.2 â€” API route (`src/app/api/auth/[...nextauth]/route.ts`)

```typescript
import NextAuth from "next-auth"
import { authOptions } from "@/lib/auth"
const handler = NextAuth(authOptions)
export { handler as GET, handler as POST }
```

### Step 4.3 â€” Middleware (`src/middleware.ts`)

```typescript
import authMiddleware from "next-auth/middleware"
export const middleware = authMiddleware
export default authMiddleware
export const config = {
  matcher: ["/((?!api/auth|_next/static|_next/image|favicon.ico|login).*)"],
}
```

### Step 4.4 â€” Login page (`src/app/login/page.tsx`)

Simple centered card with email + password fields. On submit: call `signIn("credentials", {...})` from next-auth/react. Redirect to `/` on success. Show error toast on failure.

**Demo credentials (seed data):**
| Role | Email | Password |
|------|-------|----------|
| Admin | admin@almatech.com | admin123 |
| Operator | operator@statoil.com | operator123 |
| OEM Partner | partner@oem.com | partner123 |

---

## Phase 5 â€” API Routes

All routes live in `src/app/api/`. Each follows the pattern: GET (list/paginated), POST (create), and a `[id]/route.ts` for GET (single), PUT (update), DELETE.

### Routes to build

| Route folder | Models served | Key query params |
|---|---|---|
| `orders/` | Order + User + Blueprint + PrintCenter | `?status=`, `?priority=`, `?page=` |
| `blueprints/` | Blueprint | `?category=`, `?status=` |
| `centers/` | PrintCenter + MaterialStock | `?status=` |
| `shipments/` | Shipment + Order | `?status=` |
| `partners/` | Partner | `?type=`, `?status=` |
| `materials/` | Material + MaterialStock | `?status=` |
| `certifications/` | Certification | `?status=`, `?type=` |
| `authorities/` | CertificationAuthority | â€” |
| `audit/` | AuditLog + Order + User | `?orderId=`, `?userId=` |
| `cert-requests/` | CertRequest | `?status=` |
| `engagements/` | Engagement | `?stage=` |
| `training/` | Training | `?status=`, `?assignedTo=` |
| `stats/` | Aggregated counts for overview KPIs | â€” |
| `comparative/` | Computed JIT vs JIC comparison metrics | â€” |
| `environmental/` | Computed COâ‚‚/distance/waste metrics | â€” |
| `contact/` | Write to DB or send email (Resend/Nodemailer) | â€” |
| `customization/` | User/org preferences | â€” |

Each route should:
1. Get the session via `getServerSession(authOptions)` and return 401 if unauthenticated
2. Query Prisma with `include` to join related models
3. Return `NextResponse.json(data)`

---

## Phase 6 â€” Dashboard Shell

The entire dashboard runs as a single page (`src/app/page.tsx`) with client-side tab switching â€” no full page navigations. This keeps the sidebar persistent.

### Step 6.1 â€” Main page shell (`src/app/page.tsx`)

```tsx
'use client'
import { useState } from 'react'
import { Sidebar, Header, OverviewPage, OrdersPage, ... } from '@/components/dashboard'

export default function Dashboard() {
  const [activeTab, setActiveTab] = useState('overview')

  return (
    <div className="flex h-screen bg-background overflow-hidden">
      <Sidebar activeTab={activeTab} setActiveTab={setActiveTab} />
      <div className="flex-1 flex flex-col overflow-hidden">
        <Header pageTitle={...} />
        <main className="flex-1 overflow-auto p-6">
          {renderPage(activeTab)}
        </main>
      </div>
    </div>
  )
}
```

### Step 6.2 â€” Sidebar (`src/components/dashboard/Sidebar.tsx`)

Nav items and their icons (all from `lucide-react`):

| Tab key | Label | Icon |
|---------|-------|------|
| `overview` | Dashboard Overview | `LayoutDashboard` |
| `orders` | Orders | `ShoppingCart` |
| `digital_inventory` | Digital Inventory | `Database` |
| `blueprints` | Blueprint Library | `FileText` |
| `centers` | Print Centers | `Factory` |
| `shipments` | Shipments | `Truck` |
| `materials` | Materials Inventory | `Package` |
| `partners` | OEM Partners | `Handshake` |
| `analytics` | Analytics | `BarChart3` |
| `audit` | Audit Logs | `Shield` |
| `certifications` | Certifications | `Award` |
| `authorities` | Cert. Authorities | `Building` |
| `services` | Customer Success | `Users` |
| `settings` | Settings | `Settings` |

Sidebar also shows: AddManuChain logo/icon at top, logged-in user name + role badge at bottom, dark mode toggle.

### Step 6.3 â€” Header (`src/components/dashboard/Header.tsx`)

Shows: page title + subtitle, notification bell icon, user avatar with role, sign-out button.

---

## Phase 7 â€” Dashboard Pages (14 pages)

Build each as a React component in `src/components/dashboard/`. Each fetches its data via SWR from the API routes built in Phase 5.

### Page 1 â€” OverviewPage

**KPI cards (top row, 4 cards):**
- Active Orders (count, trend)
- Blueprints in Library (count)
- Print Centers Online (count/total)
- Avg Lead Time (days, vs legacy benchmark)

**Second row:**
- Recent Orders table (last 10, with status badges)
- Print Center status list (online/busy/offline)

**Third row:**
- Recharts LineChart: orders per week (last 12 weeks)
- Recharts BarChart: cost savings JIT vs JIC comparison

### Page 2 â€” OrdersPage

Full data table using `@tanstack/react-table`:
- Columns: Order ID, Part Name, Requester, Status, Priority, Print Center, ETA, Actions
- Filters: Status (all/pending/printing/quality_check/shipped/delivered), Priority, Date range
- Actions: View detail â†’ opens Sheet with full order info + audit trail, Cancel, Update status
- "New Order" button â†’ Dialog with form: part name, select blueprint, select print center, priority, notes

### Page 3 â€” DigitalInventoryPage

The AI feasibility assessment module:
- Upload/input: paste a spare parts list (CSV or manual entry)
- Platform scores each part by AM viability (geometry complexity, material, volume, criticality)
- Output: viability score per part, estimated savings, recommended materials and processes
- Budget calculator: compare physical inventory cost vs digital inventory cost over 5 years

### Page 4 â€” BlueprintsPage

- Searchable card grid of all blueprints
- Card shows: part name, category, OEM, material, certification badge, print count, status
- "Upload Blueprint" button â†’ multi-step form: metadata â†’ file upload â†’ certification assignment â†’ review
- Detail view: full spec sheet, version history, print order history, IP access log

### Page 5 â€” CentersPage

- Map-style grid view of print center cards
- Card shows: name, location, status indicator (green/yellow/red), active printers / total, current jobs, capacity bar
- Material stock breakdown per center
- "Add Center" form: name, location, certification, contact info, materials list

### Page 6 â€” ShipmentsPage

- Table: Tracking ID, Order ID, Origin â†’ Destination, Carrier, Status, ETA, Progress (%)
- Progress bar with 5 stages: Preparing â†’ In Transit â†’ Out for Delivery â†’ Delivered
- Click row: full shipment timeline sheet with location milestones

### Page 7 â€” MaterialsPage

- Table: material name, category, total stock, unit, status (adequate/low/critical)
- Per-center stock breakdown (nested)
- Reorder alerts for materials below `reorderPoint`
- Stock management: adjust quantities per print center

### Page 8 â€” PartnersPage

- Table: Partner name, type, status, blueprints contributed, total prints, revenue generated
- Status badges: Active / Pending / Inactive
- "Add Partner" form: name, type, contact email/phone, address
- Detail view: engagement history, blueprints list, revenue chart (Recharts BarChart)

### Page 9 â€” AnalyticsPage

Four sub-sections (tabs):

**A) ROI Comparison (JIT vs JIC)**
- Side-by-side bar chart: warehouse cost, lead time (days), certification cost, carbon footprint
- KPI summary: 81% lead time reduction, 81% warehouse cost savings

**B) Comparative Metrics**
- Table comparing legacy vs AddManuChain on: storage, lead time, cert cost, IP risk, obsolescence risk

**C) Environmental Impact**
- Recharts AreaChart: COâ‚‚ saved per month
- Stats: total miles avoided, waste reduction, local manufacturing percentage

**D) Business Intelligence**
- Line chart: order volume trend (weekly)
- Recharts PieChart: order distribution by segment (O&G / Naval / Arctic)
- Top 5 most-ordered parts

### Page 10 â€” AuditLogPage

- Filterable table: timestamp, order ID, action, actor (user), details
- Actions logged automatically on: order create/update/cancel, blueprint access, print start/complete, shipment update
- Export to CSV button
- Immutable (no delete, no edit rows)

### Page 11 â€” CertificationsPage

- Table: cert name, type, issuer, holder, status badge, issue date, expiry date
- Status: Active / Pending / Expiring Soon / Expired
- Color-coded expiry warning (amber if <90 days, red if expired)
- Link to certification document (PDF viewer or external URL)

### Page 12 â€” AuthoritiesPage

- Cards for each certification authority: Lloyd's Register, DNV GL, ABS, CSA, ASTM
- Shows: country, accreditation scope, active certifications count, contact info
- "Manage relationship" â†’ form for updating contact and notes

### Page 13 â€” CustomerSuccessPage

5-phase engagement tracker (progress through: Assessment â†’ Adoption â†’ Integration â†’ Training â†’ Maintenance):
- Kanban-style board (using `@dnd-kit` for drag-and-drop between stages)
- Each card: customer name, account manager, current stage, next action date, completion %
- Training module tracker: course name, assigned users, completion status

### Page 14 â€” SettingsPage

- Profile: name, email, company, role (read-only), avatar upload
- Notifications: toggle email alerts for order status changes, material low-stock, cert expiry
- Security: change password form (bcrypt comparison + update)
- Theme: light / dark mode toggle (syncs with ThemeProvider)
- API Keys: display/rotate API key for external integrations (future)

---

## Phase 8 â€” Custom Hooks (SWR)

All data fetching is centralized in `src/hooks/use-dashboard.ts`. Pattern:

```typescript
import useSWR from 'swr'

const fetcher = (url: string) => fetch(url).then(r => r.json())

export function useOrders(filters?: { status?: string; priority?: string }) {
  const params = new URLSearchParams(filters as Record<string,string>)
  const { data, error, mutate } = useSWR(`/api/orders?${params}`, fetcher)
  return { orders: data, isLoading: !error && !data, isError: error, mutate }
}

// Repeat for: useBlueprints, useCenters, useShipments, useMaterials,
//             usePartners, useCertifications, useAuthorities,
//             useAuditLogs, useStats, useAnalytics, useEngagements
```

---

## Phase 9 â€” TypeScript Types

### `src/types/next-auth.d.ts`

Extend the default session to include `role` and `company`:

```typescript
import "next-auth"
declare module "next-auth" {
  interface Session {
    user: {
      id: string
      name?: string | null
      email?: string | null
      role: string
      company?: string | null
    }
  }
}
declare module "next-auth/jwt" {
  interface JWT {
    role: string
    company?: string | null
  }
}
```

### `src/types/index.ts`

Define shared types matching the Prisma models: `Order`, `Blueprint`, `PrintCenter`, `Shipment`, `Partner`, `Material`, `Certification`, `AuditLog`, `Engagement`.

---

## Phase 10 â€” Configuration Files

### `next.config.ts`
```typescript
const nextConfig = {
  output: "standalone",       // required for Docker/self-hosted
  typescript: { ignoreBuildErrors: true },
  reactStrictMode: false,
}
```

### `tailwind.config.ts`
Default shadcn/ui config. Add the AddManuChain brand colors under `theme.extend.colors`:
```typescript
colors: {
  brand: {
    dark:    "#0F172A",
    blue:    "#0EA5E9",
    teal:    "#14B8A6",
    amber:   "#F59E0B",
    offwhite:"#F8FAFC",
  }
}
```

### `components.json` (shadcn/ui config)
```json
{
  "style": "default",
  "rsc": true,
  "tsx": true,
  "tailwind": { "config": "tailwind.config.ts", "css": "src/app/globals.css", "baseColor": "slate", "cssVariables": true },
  "aliases": { "components": "@/components", "utils": "@/lib/utils" }
}
```

### `sentry.client.config.ts` / `sentry.server.config.ts` / `sentry.edge.config.ts`
Standard Sentry Next.js initialization. Set `SENTRY_DSN` in environment variables.

---

## Phase 11 â€” Deployment

### Option A â€” Vercel (recommended for MVP)

```bash
npm install -g vercel
vercel
```

Set environment variables in Vercel dashboard:
```
DATABASE_URL=postgresql://...
NEXTAUTH_URL=https://your-domain.vercel.app
NEXTAUTH_SECRET=<your-secret>
SENTRY_DSN=<your-sentry-dsn>
```

### Option B â€” Docker + Caddy (self-hosted)

The dashboard includes a `Caddyfile` and `.dockerignore` for self-hosting.

```dockerfile
FROM node:18-alpine AS builder
WORKDIR /app
COPY . .
RUN npm ci && npm run build

FROM node:18-alpine AS runner
WORKDIR /app
ENV NODE_ENV=production
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static
COPY --from=builder /app/public ./public
EXPOSE 3000
CMD ["node", "server.js"]
```

```Caddyfile
your-domain.com {
  reverse_proxy localhost:3000
}
```

---

## Phase 12 â€” Build Order Summary

Follow this sequence to avoid dependency errors:

```
1.  Create Next.js app + install deps
2.  Install shadcn/ui + all components
3.  Set globals.css design tokens
4.  Write prisma/schema.prisma + npx prisma db push
5.  Write prisma/seed.ts + npx tsx prisma/seed.ts
6.  Set up NextAuth (lib/auth.ts + api/auth route + middleware)
7.  Build login page
8.  Build Providers.tsx + root layout
9.  Build all API routes (Phase 5 list)
10. Build custom hooks (use-dashboard.ts)
11. Build Sidebar + Header shell
12. Build page.tsx shell with tab switching
13. Build pages in this order:
      OverviewPage â†’ OrdersPage â†’ BlueprintsPage â†’ CentersPage
      â†’ ShipmentsPage â†’ MaterialsPage â†’ PartnersPage
      â†’ AnalyticsPage â†’ AuditLogPage â†’ CertificationsPage
      â†’ AuthoritiesPage â†’ CustomerSuccessPage â†’ DigitalInventoryPage
      â†’ SettingsPage
14. Add dark mode toggle
15. Add Sentry error tracking
16. Deploy to Vercel
```

---

## File Tree (Target State)

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth/[...nextauth]/route.ts
â”‚   â”‚   â”œâ”€â”€ orders/route.ts + [id]/route.ts
â”‚   â”‚   â”œâ”€â”€ blueprints/route.ts + [id]/route.ts
â”‚   â”‚   â”œâ”€â”€ centers/route.ts + [id]/route.ts
â”‚   â”‚   â”œâ”€â”€ shipments/route.ts + [id]/route.ts
â”‚   â”‚   â”œâ”€â”€ partners/route.ts + [id]/route.ts
â”‚   â”‚   â”œâ”€â”€ materials/route.ts + [id]/route.ts
â”‚   â”‚   â”œâ”€â”€ certifications/route.ts + [id]/route.ts
â”‚   â”‚   â”œâ”€â”€ authorities/route.ts + [id]/route.ts
â”‚   â”‚   â”œâ”€â”€ audit/route.ts
â”‚   â”‚   â”œâ”€â”€ cert-requests/route.ts
â”‚   â”‚   â”œâ”€â”€ engagements/route.ts
â”‚   â”‚   â”œâ”€â”€ training/route.ts
â”‚   â”‚   â”œâ”€â”€ stats/route.ts
â”‚   â”‚   â”œâ”€â”€ comparative/route.ts
â”‚   â”‚   â”œâ”€â”€ environmental/route.ts
â”‚   â”‚   â”œâ”€â”€ contact/route.ts
â”‚   â”‚   â””â”€â”€ customization/route.ts
â”‚   â”œâ”€â”€ login/page.tsx
â”‚   â”œâ”€â”€ globals.css
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx                    â† main dashboard shell
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Providers.tsx
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ index.ts                â† barrel export
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ OverviewPage.tsx
â”‚   â”‚   â”œâ”€â”€ OrdersPage.tsx
â”‚   â”‚   â”œâ”€â”€ DigitalInventoryPage.tsx
â”‚   â”‚   â”œâ”€â”€ BlueprintsPage.tsx
â”‚   â”‚   â”œâ”€â”€ CentersPage.tsx
â”‚   â”‚   â”œâ”€â”€ ShipmentsPage.tsx
â”‚   â”‚   â”œâ”€â”€ MaterialsPage.tsx
â”‚   â”‚   â”œâ”€â”€ PartnersPage.tsx
â”‚   â”‚   â”œâ”€â”€ AnalyticsPage.tsx
â”‚   â”‚   â”œâ”€â”€ AuditLogPage.tsx
â”‚   â”‚   â”œâ”€â”€ CertificationsPage.tsx
â”‚   â”‚   â”œâ”€â”€ AuthoritiesPage.tsx
â”‚   â”‚   â”œâ”€â”€ CustomerSuccessPage.tsx
â”‚   â”‚   â””â”€â”€ SettingsPage.tsx
â”‚   â””â”€â”€ ui/                         â† shadcn components (auto-generated)
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ use-dashboard.ts
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”œâ”€â”€ prisma.ts
â”‚   â””â”€â”€ utils.ts
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ next-auth.d.ts
â”‚   â””â”€â”€ index.ts
â””â”€â”€ middleware.ts

prisma/
â”œâ”€â”€ schema.prisma
â”œâ”€â”€ seed.ts
â””â”€â”€ dev.db

public/                             â† logos, icons, industrial photos
```

---

*Roadmap extracted from full analysis of `Website/AddManuChain Dashboard/` source â€” Feb 25, 2026.*
